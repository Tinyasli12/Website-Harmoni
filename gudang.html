<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventaris Gudang - Rumah Biru</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        /* --- FONDASI UMUM --- */
        :root {
            --primary-color: #004c99;
            --secondary-color: #5d9cec;
            --success-color: #00a876;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-bg: #f8f9fa;
        }
        
        body { 
            padding-top: 70px; 
            background-color: #f8f9fa; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        }
        .text-primary-custom { color: var(--primary-color) !important; }

        /* --- NAVBAR RTB (Konsisten) --- */
        .custom-navbar {
            background-color: var(--primary-color); 
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed; 
            top: 0; 
            width: 100%; 
            z-index: 1030;
        }
        .custom-navbar .nav-link { 
            color: rgba(255, 255, 255, 0.85); 
            font-weight: 500; 
            padding-left: 1rem !important; 
            padding-right: 1rem !important; 
            transition: all 0.3s;
        }
        .custom-navbar .nav-link:hover, 
        .custom-navbar .nav-link.active { 
            color: white; 
            border-bottom: 2px solid var(--secondary-color); 
        }
        
        /* --- HEADER & FILTER --- */
        #gudang-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #0066cc 100%);
            color: white;
            padding: 40px 0;
            margin-bottom: 30px;
        }
        .search-input-group input {
            border-right: none;
            border-radius: 8px 0 0 8px;
        }
        .search-input-group button {
            background-color: var(--secondary-color);
            color: white;
            border-left: none;
            border-radius: 0 8px 8px 0;
            transition: background-color 0.3s;
        }
        .search-input-group button:hover {
            background-color: #4a8be8;
        }

        /* --- ACTION BUTTONS --- */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        .action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
        }
        .action-btn i {
            font-size: 1.1rem;
        }

        /* --- SIDEBAR KATEGORI --- */
        .sidebar-menu a {
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 8px;
            display: block;
            color: #495057;
            text-decoration: none;
            transition: all 0.3s;
        }
        .sidebar-menu a:hover {
            background-color: #e9ecef;
            color: var(--primary-color);
        }
        .sidebar-menu a.active {
            background-color: #e6f0ff;
            color: var(--primary-color);
            font-weight: bold;
        }

        /* --- PRODUCT CARD --- */
        .item-card {
            border: 1px solid #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            background-color: white;
            transition: all 0.3s;
            cursor: pointer;
            height: 100%;
        }
        .item-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
        }
        .item-image {
            height: 180px;
            object-fit: cover;
            border-radius: 12px 12px 0 0;
            width: 100%;
        }
        .item-status {
            font-size: 0.85rem;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
        }
        .status-ready { 
            background-color: rgba(0, 168, 118, 0.1); 
            color: var(--success-color); 
        }
        .status-low { 
            background-color: rgba(255, 193, 7, 0.1); 
            color: var(--warning-color); 
        }
        .status-out { 
            background-color: rgba(220, 53, 69, 0.1); 
            color: var(--danger-color); 
        }
        .btn-order {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 15px;
            border-radius: 6px;
            font-size: 0.85rem;
            transition: background-color 0.3s;
        }
        .btn-order:hover {
            background-color: #003366;
        }
        .btn-order:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        /* --- MODAL STYLING --- */
        .modal-header {
            background-color: var(--primary-color);
            color: white;
        }
        .form-label {
            font-weight: 500;
            margin-bottom: 8px;
        }
        .form-control, .form-select {
            border-radius: 8px;
            padding: 10px 15px;
        }
        .btn-submit {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        .btn-submit:hover {
            background-color: #003366;
        }

        /* --- FOOTER --- */
        .site-footer { 
            background-color: #f8f8f8; 
            border-top: 1px solid #eee; 
            padding-top: 50px; 
            padding-bottom: 20px; 
            margin-top: 50px;
        }

        /* --- RESPONSIVE ADJUSTMENTS --- */
        @media (max-width: 768px) {
            .action-buttons {
                flex-direction: column;
            }
            .action-btn {
                justify-content: center;
            }
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg custom-navbar">
        <div class="container-fluid container-xl">
            <a class="navbar-brand text-white fw-bold" href="index.html">
                <img src="assets/images/white_logo_RTB.png" alt="Logo Rumah Biru" height="40" class="me-2">
                HARMONI
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="mainNavbar">
                <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a href="ppbp_ppti.html" class="nav-link">PPBP PPTI</a></li>
                    <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                    <li class="nav-item"><a href="booking.html" class="nav-link">Booking</a></li>
                    <li class="nav-item"><a href="laporan.html" class="nav-link">Pelaporan</a></li>
                    <li class="nav-item"><a href="gudang.html" class="nav-link active" aria-current="page">Gudang</a></li> 
                    <li class="nav-item"><a href="berita.html" class="nav-link">Berita</a></li>
                </ul>
                
                <div class="d-flex">
                    <a href="register.html" class="btn btn-danger me-2">Daftar Akun</a>
                    <a href="login.html" class="btn btn-outline-light">Login</a>
                </div>
            </div>
        </div>
    </nav>

    <header id="gudang-header">
        <div class="container">
            <h1 class="fw-bold mb-3">Gudang Inventaris Kelas (PPTI/PPBP)</h1>
            <p class="mb-4">Setoran barang logistik antar kelas yang dapat dipinjam/digunakan oleh Warga Biru lainnya.</p>
            
            <div class="row">
                <div class="col-md-8">
                    <div class="input-group search-input-group">
                        <input type="text" class="form-control form-control-lg" id="searchInput" placeholder="Cari barang (Ex: Proyektor, Kabel HDMI, Bola)">
                        <button class="btn btn-lg" type="button" id="searchButton">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-light action-btn" data-bs-toggle="modal" data-bs-target="#setorBarangModal">
                    <i class="bi bi-plus-circle"></i> Setor Barang Baru
                </button>
                <button class="btn btn-light action-btn" data-bs-toggle="modal" data-bs-target="#laporBarangModal">
                    <i class="bi bi-exclamation-triangle"></i> Laporkan Barang Rusak
                </button>
            </div>
        </div>
    </header>

    <div class="container py-4">
        <div class="row g-4">
            
            <div class="col-md-3">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title mb-3 fw-bold border-bottom pb-2">Kategori Barang</h5>
                        <div class="sidebar-menu" id="categorySidebar">
                            <!-- Kategori akan diisi oleh JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-9">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="fw-bold mb-0">Menampilkan <span id="itemCount">...</span> Item</h5>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary btn-sm" id="sortByName">
                            <i class="bi bi-sort-alpha-down"></i> Nama
                        </button>
                        <button class="btn btn-outline-primary btn-sm" id="sortByStock">
                            <i class="bi bi-sort-numeric-down"></i> Stok
                        </button>
                    </div>
                </div>
                
                <div class="row g-4" id="itemListing">
                    <p class="text-center text-muted">Memuat inventaris...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Setor Barang Baru -->
    <div class="modal fade" id="setorBarangModal" tabindex="-1" aria-labelledby="setorBarangModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="setorBarangModalLabel">Setor Barang Baru ke Gudang</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="setorBarangForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="namaBarang" class="form-label">Nama Barang</label>
                                <input type="text" class="form-control" id="namaBarang" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="kategoriBarang" class="form-label">Kategori</label>
                                <select class="form-select" id="kategoriBarang" required>
                                    <option value="">Pilih Kategori</option>
                                    <option value="Acara & Presentasi">Acara & Presentasi</option>
                                    <option value="Perkakas & Listrik">Perkakas & Listrik</option>
                                    <option value="Kebersihan">Kebersihan</option>
                                    <option value="Olahraga">Olahraga</option>
                                    <option value="Kesehatan">Kesehatan</option>
                                    <option value="Lainnya">Lainnya</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="jumlahBarang" class="form-label">Jumlah Barang</label>
                                <input type="number" class="form-control" id="jumlahBarang" min="1" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="pemilikBarang" class="form-label">Pemilik Barang</label>
                                <select class="form-select" id="pemilikBarang" required>
                                    <option value="">Pilih Pemilik</option>
                                    <option value="PPBP 4">PPBP 4</option>
                                    <option value="PPTI 19">PPTI 19</option>
                                    <option value="PPBP 6">PPBP 6</option>
                                    <option value="DPP">DPP</option>
                                    <option value="CORE Team">CORE Team</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="deskripsiBarang" class="form-label">Deskripsi Barang</label>
                            <textarea class="form-control" id="deskripsiBarang" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="gambarBarang" class="form-label">Unggah Gambar Barang (Opsional)</label>
                            <input type="file" class="form-control" id="gambarBarang" accept="image/*">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-submit" id="submitSetorBarang">Setor Barang</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Lapor Barang Rusak -->
    <div class="modal fade" id="laporBarangModal" tabindex="-1" aria-labelledby="laporBarangModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="laporBarangModalLabel">Laporkan Barang Rusak/Bekas</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="laporBarangForm">
                        <div class="mb-3">
                            <label for="barangDilaporkan" class="form-label">Barang yang Dilaporkan</label>
                            <select class="form-select" id="barangDilaporkan" required>
                                <option value="">Pilih Barang</option>
                                <!-- Opsi akan diisi oleh JavaScript -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="jenisLaporan" class="form-label">Jenis Laporan</label>
                            <select class="form-select" id="jenisLaporan" required>
                                <option value="">Pilih Jenis Laporan</option>
                                <option value="rusak">Barang Rusak</option>
                                <option value="bekas">Barang Bekas (Masih Bisa Dipakai)</option>
                                <option value="hilang">Barang Hilang</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="deskripsiKerusakan" class="form-label">Deskripsi Kerusakan/Kondisi</label>
                            <textarea class="form-control" id="deskripsiKerusakan" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="gambarKerusakan" class="form-label">Unggah Foto Kerusakan (Opsional)</label>
                            <input type="file" class="form-control" id="gambarKerusakan" accept="image/*">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-submit" id="submitLaporBarang">Kirim Laporan</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="site-footer pt-5 pb-4">
        <div class="container-xl">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <span class="fw-bold text-primary-custom" style="font-size: 1.5rem;">Rumah Biru</span>
                    <h5 class="fw-bold mt-2">Alamat</h5>
                    <p class="text-muted">Jl. Telekomunikasi, Terusan Buah Batu - Bandung 40257, Indonesia</p>
                </div>
                <div class="col-6 col-md-2 mb-4">
                    <h5 class="fw-bold">FAQ</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-decoration-none text-muted">Umum</a></li>
                        <li><a href="#" class="text-decoration-none text-muted">Pendaftaran</a></li>
                    </ul>
                </div>
                <div class="col-6 col-md-2 mb-4">
                    <h5 class="fw-bold">Artikel</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-decoration-none text-muted">Tren Kampus</a></li>
                        <li><a href="#" class="text-decoration-none text-muted">Fakta Jurusan</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h2 class="text-danger fw-bolder mb-3">Ada Pertanyaan?</h2>
                    <p class="text-muted">Hubungi kami sekarang juga untuk informasi lebih lanjut.</p>
                    <a href="#" class="btn btn-primary-custom text-white fw-bold">Hubungi Kami</a>
                </div>
            </div>
            <div class="text-center text-muted border-top pt-3 mt-3">
                &copy; 2025 Rumah Biru. Semua hak cipta dilindungi.
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const categorySidebar = document.getElementById('categorySidebar');
            const itemListingContainer = document.getElementById('itemListing');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const itemCountElement = document.getElementById('itemCount');
            const sortByNameBtn = document.getElementById('sortByName');
            const sortByStockBtn = document.getElementById('sortByStock');
            const submitSetorBarangBtn = document.getElementById('submitSetorBarang');
            const submitLaporBarangBtn = document.getElementById('submitLaporBarang');
            const barangDilaporkanSelect = document.getElementById('barangDilaporkan');
            
            // ====================================
            // DATA INVENTARIS GUDANG (BARANG-BARANG KELAS)
            // ====================================
            let INVENTORY_DATA = [
                // Kategori: Logistik Acara
                { id: 1, name: "Proyektor EPSON C52", category: "Acara & Presentasi", stock: 3, total: 5, owner: "PPBP 4", image: "gudang/proyektor.jpg" },
                { id: 2, name: "Kabel Ekstensi 10m", category: "Perkakas & Listrik", stock: 15, total: 20, owner: "PPTI 19", image: "gudang/kabel.jpg" },
                { id: 3, name: "Mic Wireless Shure", category: "Acara & Presentasi", stock: 0, total: 2, owner: "PPBP 6", image: "gudang/mic.jpg" },
                // Kategori: Kebersihan
                { id: 4, name: "Vacuum Cleaner", category: "Kebersihan", stock: 1, total: 3, owner: "DPP", image: "gudang/vacuum.jpg" },
                { id: 5, name: "Ember Pel MOP", category: "Kebersihan", stock: 10, total: 10, owner: "PPBP 4", image: "gudang/ember.jpg" },
                // Kategori: Olahraga
                { id: 6, name: "Bola Voli Mikasa", category: "Olahraga", stock: 2, total: 5, owner: "PPTI 19", image: "gudang/bola_voli.jpg" },
                { id: 7, name: "Net Lapangan", category: "Olahraga", stock: 1, total: 1, owner: "DPP", image: "gudang/net.jpg" },
                // Kategori: Lain-lain
                { id: 8, name: "Papan Tulis Flip Chart", category: "Acara & Presentasi", stock: 4, total: 4, owner: "PPBP 6", image: "gudang/flipchart.jpg" },
                { id: 9, name: "Obat P3K Set", category: "Kesehatan", stock: 1, total: 1, owner: "CORE Team", image: "gudang/p3k.jpg" },
                { id: 10, name: "Tenda Lipat 3x3m", category: "Acara & Presentasi", stock: 0, total: 1, owner: "PPBP 4", image: "gudang/tenda.jpg" },
            ];
            
            // Mendapatkan daftar kategori unik
            const UNIQUE_CATEGORIES = ["Semua Kategori", ...new Set(INVENTORY_DATA.map(item => item.category))];

            // ====================================
            // 1. FUNGSI: MENGISI SIDEBAR KATEGORI
            // ====================================
            function renderCategories(activeCategory = "Semua Kategori") {
                categorySidebar.innerHTML = '';
                
                UNIQUE_CATEGORIES.forEach(category => {
                    const isActive = category === activeCategory ? 'active' : '';
                    const link = document.createElement('a');
                    link.href = '#';
                    link.className = `sidebar-category-link ${isActive}`;
                    link.dataset.category = category;
                    link.textContent = category;
                    
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        const cat = this.dataset.category;
                        // Panggil fungsi render utama untuk memfilter
                        filterAndRenderItems(cat);
                        // Set active class
                        document.querySelectorAll('.sidebar-category-link').forEach(a => a.classList.remove('active'));
                        this.classList.add('active');
                    });
                    
                    categorySidebar.appendChild(link);
                });
            }

            // ====================================
            // 2. FUNGSI: MERENDER KARTU INVENTARIS
            // ====================================
            function renderInventory(data) {
                if (!data || data.length === 0) {
                    itemListingContainer.innerHTML = '<p class="text-center text-muted mt-4 w-100">Inventaris tidak ditemukan.</p>';
                    itemCountElement.textContent = 0;
                    return;
                }

                itemListingContainer.innerHTML = '';
                itemCountElement.textContent = data.length;
                
                data.forEach(item => {
                    const isAvailable = item.stock > 0;
                    const stockStatus = item.stock === 0 ? "Out of Stock" : (item.stock <= 3 ? "Stok Rendah" : "Tersedia");
                    const statusClass = item.stock === 0 ? "status-out" : (item.stock <= 3 ? "status-low" : "status-ready");
                    
                    // Encode data untuk dilewatkan ke detail page (simulasi)
                    const detailUrl = `#detail-${item.id}`; 
                    
                    const col = document.createElement('div');
                    col.className = 'col-lg-4 col-md-6 col-sm-6';
                    col.innerHTML = `
                        <div class="item-card">
                            <img src="https://via.placeholder.com/300x180/004c99/ffffff?text=${encodeURIComponent(item.name)}" class="item-image" alt="${item.name}">
                            <div class="p-3">
                                <h5 class="fw-bold">${item.name}</h5>
                                <p class="small text-muted mb-2">${item.category} | Milik: ${item.owner}</p>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <span class="item-status ${statusClass}">${stockStatus}</span>
                                        <p class="mb-0 small fw-bold mt-1">Stok: ${item.stock} / ${item.total}</p>
                                    </div>
                                    <button class="btn btn-sm btn-order" ${isAvailable ? '' : 'disabled'}>
                                        ${isAvailable ? 'Order Pinjam' : 'Habis'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    itemListingContainer.appendChild(col);
                });
            }

            // ====================================
            // 3. FUNGSI: LOGIC FILTER UTAMA
            // ====================================
            let currentSort = 'stock';
            
            function filterAndRenderItems(categoryFilter = "Semua Kategori", searchQuery = "") {
                let filteredData = INVENTORY_DATA;
                const query = searchQuery.toLowerCase();

                // 1. Filter Kategori
                if (categoryFilter !== "Semua Kategori") {
                    filteredData = filteredData.filter(item => item.category === categoryFilter);
                }

                // 2. Filter Pencarian
                if (query) {
                    filteredData = filteredData.filter(item => 
                        item.name.toLowerCase().includes(query) ||
                        item.category.toLowerCase().includes(query) ||
                        item.owner.toLowerCase().includes(query)
                    );
                }
                
                // 3. Urutkan data
                if (currentSort === 'name') {
                    filteredData.sort((a, b) => a.name.localeCompare(b.name));
                } else {
                    // Urutkan: Stok Tersedia > Stok Rendah > Habis
                    filteredData.sort((a, b) => {
                        if (a.stock === 0 && b.stock > 0) return 1;
                        if (a.stock > 0 && b.stock === 0) return -1;
                        if (a.stock <= 3 && b.stock > 3) return 1;
                        if (a.stock > 3 && b.stock <= 3) return -1;
                        return b.stock - a.stock; // Urutkan stok tinggi ke rendah
                    });
                }

                renderInventory(filteredData);
            }
            
            // ====================================
            // 4. LOGIC SEARCH BUTTON
            // ====================================
            searchButton.addEventListener('click', function(event) {
                event.preventDefault();
                const query = searchInput.value.trim();
                // Set kategori aktif ke "Semua Kategori" saat pencarian manual
                renderCategories("Semua Kategori"); 
                filterAndRenderItems("Semua Kategori", query);
            });
            
            // ====================================
            // 5. LOGIC SORTING BUTTONS
            // ====================================
            sortByNameBtn.addEventListener('click', function() {
                currentSort = 'name';
                filterAndRenderItems();
                sortByNameBtn.classList.add('btn-primary');
                sortByNameBtn.classList.remove('btn-outline-primary');
                sortByStockBtn.classList.add('btn-outline-primary');
                sortByStockBtn.classList.remove('btn-primary');
            });
            
            sortByStockBtn.addEventListener('click', function() {
                currentSort = 'stock';
                filterAndRenderItems();
                sortByStockBtn.classList.add('btn-primary');
                sortByStockBtn.classList.remove('btn-outline-primary');
                sortByNameBtn.classList.add('btn-outline-primary');
                sortByNameBtn.classList.remove('btn-primary');
            });
            
            // ====================================
            // 6. FUNGSI: SETOR BARANG BARU
            // ====================================
            submitSetorBarangBtn.addEventListener('click', function() {
                const namaBarang = document.getElementById('namaBarang').value;
                const kategoriBarang = document.getElementById('kategoriBarang').value;
                const jumlahBarang = parseInt(document.getElementById('jumlahBarang').value);
                const pemilikBarang = document.getElementById('pemilikBarang').value;
                const deskripsiBarang = document.getElementById('deskripsiBarang').value;
                
                if (!namaBarang || !kategoriBarang || !jumlahBarang || !pemilikBarang) {
                    alert('Harap isi semua field yang wajib diisi!');
                    return;
                }
                
                // Tambahkan barang baru ke inventaris
                const newItem = {
                    id: INVENTORY_DATA.length + 1,
                    name: namaBarang,
                    category: kategoriBarang,
                    stock: jumlahBarang,
                    total: jumlahBarang,
                    owner: pemilikBarang,
                    image: "gudang/placeholder.jpg"
                };
                
                INVENTORY_DATA.push(newItem);
                
                // Reset form
                document.getElementById('setorBarangForm').reset();
                
                // Tutup modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('setorBarangModal'));
                modal.hide();
                
                // Refresh tampilan inventaris
                filterAndRenderItems();
                
                // Tampilkan notifikasi sukses
                alert('Barang berhasil ditambahkan ke inventaris!');
            });
            
            // ====================================
            // 7. FUNGSI: LAPOR BARANG RUSAK/BEKAS
            // ====================================
            function populateBarangDilaporkan() {
                barangDilaporkanSelect.innerHTML = '<option value="">Pilih Barang</option>';
                
                INVENTORY_DATA.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.id;
                    option.textContent = `${item.name} (${item.owner})`;
                    barangDilaporkanSelect.appendChild(option);
                });
            }
            
            submitLaporBarangBtn.addEventListener('click', function() {
                const barangId = parseInt(barangDilaporkanSelect.value);
                const jenisLaporan = document.getElementById('jenisLaporan').value;
                const deskripsiKerusakan = document.getElementById('deskripsiKerusakan').value;
                
                if (!barangId || !jenisLaporan || !deskripsiKerusakan) {
                    alert('Harap isi semua field yang wajib diisi!');
                    return;
                }
                
                // Cari barang yang dilaporkan
                const reportedItem = INVENTORY_DATA.find(item => item.id === barangId);
                
                if (!reportedItem) {
                    alert('Barang tidak ditemukan!');
                    return;
                }
                
                // Reset form
                document.getElementById('laporBarangForm').reset();
                
                // Tutup modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('laporBarangModal'));
                modal.hide();
                
                // Tampilkan notifikasi sukses
                alert(`Laporan untuk barang "${reportedItem.name}" berhasil dikirim! Tim kami akan segera menindaklanjuti.`);
            });
            
            // ====================================
            // INISIASI AWAL
            // ====================================
            function initialLoad() {
                renderCategories();
                filterAndRenderItems(); // Tampilkan semua item saat pertama kali dibuka
                populateBarangDilaporkan();
                
                // Set tombol sorting default
                sortByStockBtn.classList.add('btn-primary');
                sortByStockBtn.classList.remove('btn-outline-primary');
            }

            initialLoad();
        });
    </script>
</body>
</html>